---
title: "TCP UDP"
date: 2023-07-17T12:07:02+08:00
draft: true
---
## 一TCP 与 UDP的比较
| TCP  |     |UDP       |
|:---------:|-----|:---------:|
|面向连接|     | 无连接|
|每一条TCP连接只能有两个端点EP，只能一对一通信|     |面向一对一，一对多，多对一和多对多|
|面向字节流|     |对应用层交付的报文直接打包|
|首部最小20个字节，最大60字节|     |首部开销小，仅8个字节|
|可靠传输，使用流量控制和拥塞控制|     |尽最大努力交付，也就是不可靠，不使用流量控制和拥塞控制|

### TCP的可靠性：	
使用确认，重传和序列号等机制来确保数据传输等完整性与顺序，而UDP不提供这些机制，它是尽可能的交付数据，保证不可靠性。

### 数据包顺序	
TCP保证数据包安装发送顺序进行接收，如果有丢失或者乱序的数据包，TCP会进行重传或者重新排序。UDP则不保证数据包的顺序，可能会出现乱序的情况。

## TCP拥塞控制

### 拥塞原因	
1. 在某段时间内，对网络资源的需求超过了该资源所能提供的可用部分，网络性能就会变坏，这种情况就叫做拥塞。	
2. 若出现拥塞而不控制，整个网络的吞吐量将会随输入负荷的增大而降低。

### 拥塞控制过程	
1. 发送方维护一个叫做拥塞窗口cwnd的状态变量，其值取决于网络的拥塞程度，并且动态变化。
2. 发送方将拥塞窗口作为发送窗口swnd，即swnd=cwnd。
3. 维护一个慢开始门限ssthresh状态变量。

### 	
“慢开始“是指一开始向网络注入的报文段少，并不是值拥塞窗口cwnd增长速度慢；

”拥塞控制“并非完全能够避免拥塞，而是指在拥塞阶段将拥塞窗口控制为按线性规律增长，使网络比较不容易出现拥塞。

### TCP可靠传输的实现	
1. 虽然发送方的发送窗口是根据接收方的接收窗口设置的，但在同一时刻，发送方的发送窗口并不总是和接收方的接收窗口一样大。
2. 对于不按序到达的数据如何处理，TCP并无明确规定。
3. TCP要求接收方必须有累积确认和捎带确认机制，这样可以减小传输开销，接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息顺便捎带上。
4. TCP的通信是全双工通信。通信中的每一方都在发送和接收报文段。因此，每一方都有自己的发送窗口和接收窗口。

